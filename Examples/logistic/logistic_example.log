-------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/sela/Desktop/federated-fpm/Examples/logistic/logistic_example.log
  log type:  text
 opened on:  12 Apr 2024, 16:13:47

. // logistic regression low birth weight exmaple
. set seed 3425

. webuse lbw
(Hosmer & Lemeshow data)

. // create center variables
. gen center = runiformint(1,3)

. tab center, gen(center)

     center |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         59       31.22       31.22
          2 |         66       34.92       66.14
          3 |         64       33.86      100.00
------------+-----------------------------------
      Total |        189      100.00

. 
. // Fit model in Stata
. logit low age smoke center2 center3

Iteration 0:  Log likelihood =   -117.336  
Iteration 1:  Log likelihood = -113.26066  
Iteration 2:  Log likelihood = -113.22731  
Iteration 3:  Log likelihood =  -113.2273  

Logistic regression                                     Number of obs =    189
                                                        LR chi2(4)    =   8.22
                                                        Prob > chi2   = 0.0839
Log likelihood = -113.2273                              Pseudo R2     = 0.0350

------------------------------------------------------------------------------
         low | Coefficient  Std. err.      z    P>|z|     [95% conf. interval]
-------------+----------------------------------------------------------------
         age |  -.0495248    .032056    -1.54   0.122    -.1123535    .0133039
       smoke |   .6980077   .3235882     2.16   0.031     .0637865    1.332229
     center2 |  -.1657076    .400908    -0.41   0.679    -.9514729    .6200578
     center3 |   .1860336   .3930343     0.47   0.636    -.5842995    .9563667
       _cons |   .0438213   .7882377     0.06   0.956    -1.501096    1.588739
------------------------------------------------------------------------------

. estimates store logit

. 
. 
. // Now using mlad - write likelhood file in Python
. // The dataset is first split into 3 parts to 
. // represent 3 centers using setup.py
. // I use nojit as this helps when developing
. gen cons = 1

. mlad  (xb: low  = age smoke center2 center3), ///
>       llfile(logistic)                        ///
>       pysetup(setup)                          ///
>       othervars(low) othervarnames(y)         ///
>       nojit
Python module jax need to be installed.
r(198);

end of do-file
r(198);
